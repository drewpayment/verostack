
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <mat-card class="page-header-accent">
                <form #f="ngForm" (ngSubmit)="save(f)">
                    <h2 mat-card-title>Organization Details</h2>
                    <mat-card-header class="justify-content-between">
                        <mat-slide-toggle [ngClass]="{'float-right': true, 'text-muted': !editMode, 'text-light': editMode}"
                            [checked]="editMode" (change)="changeEditMode(f)" [disabled]="f.touched" color="primary">
                        </mat-slide-toggle>
                    </mat-card-header>
                    <mat-card-content class="flex-column">
                        <mat-form-field>
                            <mat-label>Company Name</mat-label>
                            <input type="text" name="firstName" [(ngModel)]="client.name" matInput [disabled]="!editMode" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Street Address</mat-label>
                            <input type="text" matInput [value]="client.street" [disabled]="!editMode" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>City</mat-label>
                            <input type="text" matInput [value]="client.city" [disabled]="!editMode" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>State</mat-label>
                            <mat-select placeholder="State" [disabled]="!editMode" (change)="onStateChange($event)"
                                [(value)]="client.state">
                                <mat-option *ngFor="let state of states" [value]="state">
                                    {{state}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </mat-card-content>
                    <mat-card-actions class="d-flex justify-content-between mb-0">
                        <button mat-button type="button" *ngIf="editMode" (click)="cancel(f)">Cancel</button>
                        <button mat-raised-button type="submit" color="primary" *ngIf="editMode">Save</button>
                    </mat-card-actions>
                </form>
            </mat-card>
            <!-- <mat-card>
            <mat-card-header class="justify-content-between">
                <mat-card-title>
                <h4>Settings</h4>
                </mat-card-title>
                <mat-slide-toggle
                [ngClass]="{'float-right': true, 'text-muted': !editOptions, 'text-light': editOptions}"
                [checked]="editOptions"
                (change)="changeOptionsMode()"
                color="primary"
                ></mat-slide-toggle>
            </mat-card-header>
            <mat-card-content>
                <mat-checkbox
                [(ngModel)]="client.options.hasOnboarding"
                matTooltip="Enables the onboarding feature on the user's profile."
                [matTooltipPosition]="tooltipPosition"
                [disabled]="!editOptions"
                >Onboarding</mat-checkbox>
            </mat-card-content>
            <mat-card-actions class="d-flex justify-content-end mx-1 mb-0">
                <button
                mat-raised-button
                type="button"
                color="primary"
                *ngIf="editOptions"
                (click)="saveOptions()"
                >Save</button>
            </mat-card-actions>
            </mat-card> -->
            <div class="row">
                <div class="col-md-7">
                    <mat-card class="border-top-primary">
                        <mat-card-header>
                            <mat-card-title>
                                <h4>Sale Status Configuration</h4>
                            </mat-card-title>
                            <mat-card-subtitle>
                                <p>
                                    The following is your organization's sale statuses. These should be updated to be used on
                                    your invoices based on the campaigns
                                    you work with.
                                </p>
                                <div>
                                    <button type="button" mat-raised-button (click)="showAddSaleStatusDialog()" color="primary"
                                        class="ml-4 mr-2">
                                        <mat-icon>add</mat-icon> Add
                                    </button>
                                    <mat-checkbox [(ngModel)]="showAllStatuses" (change)="filterStatuses()"
                                        [disabled]="!hasInactiveStatuses" class="mx-2 mt-1">Show All</mat-checkbox>
                                </div>
                            </mat-card-subtitle>
                        </mat-card-header>
            
                        <mat-card-content>
                            <mat-table [dataSource]="saleStatuses$">
                                <mat-header-row *matHeaderRowDef="displayColumns"></mat-header-row>
                                <mat-row *matRowDef="let row; columns: displayColumns"></mat-row>
            
                                <ng-container matColumnDef="name">
                                    <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
                                    <mat-cell *matCellDef="let item">
                                        {{item.name}}
                                    </mat-cell>
                                </ng-container>
            
                                <ng-container matColumnDef="isActive">
                                    <mat-header-cell *matHeaderCellDef>Active</mat-header-cell>
                                    <mat-cell *matCellDef="let item">
                                        <mat-checkbox [(ngModel)]="item.isActive" (change)="updateActiveStatus(item)">Active
                                        </mat-checkbox>
                                    </mat-cell>
                                </ng-container>
            
                            </mat-table>
                        </mat-card-content>
                    </mat-card>
                </div>
                <div class="col-md-5">
                    <mat-card class="border-top-primary">
                        <mat-card-header>
                            <mat-card-title>
                                <h4>Mobile App Settings</h4>
                            </mat-card-title>
                            <mat-card-subtitle>
                                <p>
                                    Settings that control mobile app users' experience and permissions.
                                </p>
                            </mat-card-subtitle>
                        </mat-card-header>
                        <mat-card-content>
                            <div class="row mt-2">
                                <div class="col-md-12">
                                    <mat-checkbox [formControl]="useExistingContacts"
                                        (change)="changeUseExistingContacts($event);">
                                        Do not solicit Existing Contacts
                                    </mat-checkbox>
                                    <p>
                                        By enabling this feature, users of the companion mobile app will
                                        be detered from contacting existing or past customers of your products and services.
                                    </p>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </div>
    </div>
</div>